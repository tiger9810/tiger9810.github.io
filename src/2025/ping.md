# Renderの無料プランでスリープを防ぐ方法

## 問題点

Renderの無料プランは30分間アクセスがないと自動的にスリープ状態になります。スリープ中にLINE Botにメッセージを送ると、起動に30秒～1分かかるため、ユーザーは応答を待つ必要があります。

## 解決策: UptimeRobotで定期的にアクセス

目的: 外部サービスから定期的にサーバーにアクセスすることで、スリープ状態を防ぎ、常に即座に応答できる状態を維持する。

UptimeRobotは無料で使える監視サービスです。5分ごとに自動でサーバーにアクセスしてくれるため、Renderのサーバーがスリープしなくなります。

### UptimeRobotの特徴

- 完全無料で利用可能
- 5分間隔で自動アクセス
- サーバーのダウンタイムも通知してくれる
- 設定は5分で完了

## 設定手順

### 1. UptimeRobotにアクセス

https://uptimerobot.com/ にアクセスして、アカウントを作成します。

### 2. 新しいモニターを追加

1. ログイン後、「Add New Monitor」をクリック
2. 以下の項目を入力:

| 項目 | 設定内容 |
|------|----------|
| Monitor Type | HTTP / website monitoring を選択 |
| Friendly Name | LINE Bot Health Check |
| URL | https://yourURL.onrender.com/ |
| Monitoring Interval | 5 minutes |

3. 「Create Monitor」をクリック

### 3. 動作確認

数分後、UptimeRobotのダッシュボードで以下を確認:

- Status: Up（緑色）
- Response Time: 表示される
- Uptime: 100%

これで設定完了です。

## 効果

UptimeRobotを設定すると:

- LINE Botが常に即座に応答
- スリープからの復帰待ちがなくなる
- ユーザー体験が向上
- サーバーのダウンも検知できる

## 注意事項

### Renderの無料プランの制限

無料プランは月750時間まで稼働可能です。UptimeRobotで常時起動させた場合:

- 1ヶ月 = 約720時間
- 月末近くで制限に達する可能性がある

制限に達した場合、サーバーは停止します。必要に応じて有料プランへのアップグレードを検討してください。

### 代替案

UptimeRobotを使わない場合:

- スリープを許容する（初回応答が遅くなる）
- Renderの有料プラン（$7/月）にアップグレード
- 別のホスティングサービスを検討

## いつ設定すべきか

- すぐに設定: ユーザーに公開する前
- 後で設定: まずは動作確認を優先したい場合

開発段階では不要ですが、本番運用前には設定することを推奨します。

## トラブルシューティング

### UptimeRobotでダウンと表示される

確認項目:

- Renderのサーバーが起動しているか確認
- URLが正しいか確認
- ブラウザで直接アクセスして応答を確認

### 応答時間が遅い

原因: Renderの無料プランは低スペックのため、応答に時間がかかる場合がある。

対処法: 有料プランにアップグレード。

## まとめ

UptimeRobotを使えば、完全無料でRenderのスリープ問題を解決できます。設定は5分で完了し、LINE Botのユーザー体験が大幅に向上します。

本番運用前に設定しておくことを強く推奨します。

## 参考情報

- UptimeRobot: https://uptimerobot.com/
- Render Free Plan Limits: https://render.com/docs/free