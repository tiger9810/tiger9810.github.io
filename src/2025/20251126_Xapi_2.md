# Next.jsã¨Twitter API v2ã§ä½œã‚‹è‡ªåˆ†å°‚ç”¨ã®XæŠ•ç¨¿ã‚¢ãƒ—ãƒªã€ç¬¬2éƒ¨ï¼šãƒ„ã‚¤ãƒ¼ãƒˆè¡¨ç¤ºç·¨ã€‘è‡ªåˆ†ã®ãƒ„ã‚¤ãƒ¼ãƒˆã‚’ç”»é¢ã«è¡¨ç¤ºã—ã‚ˆã†

<!--
date = "2025-11-26"
-->

## ç¬¬2éƒ¨ã¸ã‚ˆã†ã“ãï¼

ç¬¬1éƒ¨ã§ã€ŒXã§ãƒ­ã‚°ã‚¤ãƒ³ã€ãƒœã‚¿ãƒ³ãŒå‹•ãã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã­ã€‚ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼

ã§ã‚‚ã€ã€Œãƒ­ã‚°ã‚¤ãƒ³ã§ããŸã ã‘ã§ã€ä½•ã‚‚è¡¨ç¤ºã•ã‚Œãªã„...ã€ã¨æ€ã£ã¦ã„ã¾ã›ã‚“ã‹ï¼Ÿ

**å®‰å¿ƒã—ã¦ãã ã•ã„ã€‚ã“ã®ç¬¬2éƒ¨ã§ã¯ã€è‡ªåˆ†ã®ãƒ„ã‚¤ãƒ¼ãƒˆã‚’ç”»é¢ã«è¡¨ç¤ºã—ã¾ã™ã€‚**

## ã“ã®ç¬¬2éƒ¨ã®ã‚´ãƒ¼ãƒ«

**ãƒ­ã‚°ã‚¤ãƒ³å¾Œã€è‡ªåˆ†ã®æœ€æ–°ãƒ„ã‚¤ãƒ¼ãƒˆ5ä»¶ãŒç”»é¢ã«è¡¨ç¤ºã•ã‚Œã‚‹**

ãŸã£ãŸã“ã‚Œã ã‘ã§ã™ã€‚ã—ã‹ã—ã€ã“ã“ã¾ã§ã§ãã‚Œã°ã€ç¬¬3éƒ¨ã®ãƒ„ã‚¤ãƒ¼ãƒˆæŠ•ç¨¿ãƒ»å‰Šé™¤ã¯ç°¡å˜ã«ãªã‚Šã¾ã™ã€‚

---

## 3éƒ¨ä½œã®é€²æ—çŠ¶æ³

- âœ… **ç¬¬1éƒ¨ï¼ˆå®Œäº†ï¼‰ï¼š** ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½
- ğŸ”„ **ç¬¬2éƒ¨ï¼ˆä»Šå›ï¼‰ï¼š** ãƒ„ã‚¤ãƒ¼ãƒˆè¡¨ç¤ºæ©Ÿèƒ½
- â³ **ç¬¬3éƒ¨ï¼ˆæ¬¡å›ï¼‰ï¼š** ãƒ„ã‚¤ãƒ¼ãƒˆæŠ•ç¨¿ãƒ»å‰Šé™¤æ©Ÿèƒ½

---

## ç›®æ¬¡

1. [Twitter APIã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ä»•çµ„ã¿](#1-twitter-apiã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ä»•çµ„ã¿)
2. [å‹å®šç¾©ã‚’ä½œæˆã™ã‚‹](#2-å‹å®šç¾©ã‚’ä½œæˆã™ã‚‹)
3. [APIãƒ«ãƒ¼ãƒˆã‚’ä½œæˆã™ã‚‹](#3-apiãƒ«ãƒ¼ãƒˆã‚’ä½œæˆã™ã‚‹)
4. [ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹](#4-ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´apiã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹)
5. [UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹](#5-uiã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹)
6. [å‹•ä½œç¢ºèª](#6-å‹•ä½œç¢ºèª)
7. [ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¨è§£æ±ºæ–¹æ³•](#7-ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¨è§£æ±ºæ–¹æ³•)

---

## 1. Twitter APIã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ä»•çµ„ã¿

### 1-1. ãªãœç›´æ¥Twitter APIã‚’å‘¼ã¹ãªã„ã®ã‹ï¼Ÿ

ç¬¬1éƒ¨ã§å–å¾—ã—ãŸã€Œã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã€ãŒã‚ã‚Œã°ã€Twitter APIã‚’å‘¼ã¹ã¾ã™ã€‚

ã—ã‹ã—ã€**ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ç›´æ¥Twitter APIã‚’å‘¼ã¶ã®ã¯å±é™ºã§ã™**ã€‚ãªãœãªã‚‰ï¼š

âŒ ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ãŒãƒ–ãƒ©ã‚¦ã‚¶ã«å…¬é–‹ã•ã‚Œã‚‹  
âŒ æ‚ªæ„ã®ã‚ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç›—ã‚ã‚‹  
âŒ ä¸æ­£ã«ãƒ„ã‚¤ãƒ¼ãƒˆã‚’æŠ•ç¨¿ã•ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œãªã„

ãã“ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ãªæµã‚Œã«ã—ã¾ã™ï¼š
```
1. ãƒ–ãƒ©ã‚¦ã‚¶ â†’ è‡ªåˆ†ã®APIã‚µãƒ¼ãƒãƒ¼: ã€Œãƒ„ã‚¤ãƒ¼ãƒˆãŒæ¬²ã—ã„ã€
2. è‡ªåˆ†ã®APIã‚µãƒ¼ãƒãƒ¼ â†’ Twitter API: ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ã£ã¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
3. Twitter API â†’ è‡ªåˆ†ã®APIã‚µãƒ¼ãƒãƒ¼: ãƒ„ã‚¤ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã™
4. è‡ªåˆ†ã®APIã‚µãƒ¼ãƒãƒ¼ â†’ ãƒ–ãƒ©ã‚¦ã‚¶: ãƒ„ã‚¤ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’è¿”ã™
```

**é‡è¦ãªãƒã‚¤ãƒ³ãƒˆï¼š**

- ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã¯ã‚µãƒ¼ãƒãƒ¼å´ã§ã®ã¿ä½¿ç”¨
- ãƒ–ãƒ©ã‚¦ã‚¶ã«ã¯ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å…¬é–‹ã—ãªã„
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãŒä¿ãŸã‚Œã‚‹

### 1-2. Next.jsã®APIãƒ«ãƒ¼ãƒˆã¨ã¯ï¼Ÿ

Next.jsã«ã¯ã€**APIãƒ«ãƒ¼ãƒˆ**ã¨ã„ã†æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚

`app/api/`ãƒ•ã‚©ãƒ«ãƒ€ã®ä¸­ã«`route.ts`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚‹ã¨ã€è‡ªå‹•çš„ã«APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«ãªã‚Šã¾ã™ã€‚

ä¾‹ï¼š
```
app/api/twitter/tweets/route.ts
â†’ http://localhost:3000/api/twitter/tweets
```

ã“ã®APIãƒ«ãƒ¼ãƒˆã‚’ä½¿ã£ã¦ã€Twitter APIã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚

---

## 2. å‹å®šç¾©ã‚’ä½œæˆã™ã‚‹

TypeScriptã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã§ã€ã¾ãšã¯ãƒ„ã‚¤ãƒ¼ãƒˆã®ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’å®šç¾©ã—ã¾ã™ã€‚

### 2-1. å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ

`types/tweet.ts`ã‚’ä½œæˆã—ã¾ã™ï¼š
```bash
touch types/tweet.ts
```

**Windowsã®å ´åˆï¼š**

ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ã§`types`ãƒ•ã‚©ãƒ«ãƒ€å†…ã«`tweet.ts`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

### 2-2. ãƒ„ã‚¤ãƒ¼ãƒˆã®å‹ã‚’å®šç¾©

`types/tweet.ts`:
```typescript
// ãƒ„ã‚¤ãƒ¼ãƒˆã®å‹å®šç¾©

export interface Tweet {
    id: string;
    text: string;
    created_at: string;
    author_id: string;
    public_metrics: {
        retweet_count: number;
        reply_count: number;
        like_count: number;
        quote_count: number;
    };
}

export interface TwitterUser {
    id: string;
    name: string;
    username: string;
    profile_image_url?: string;
}

export interface TwitterAPIResponse {
    data: Tweet[];
    includes?: {
        users?: TwitterUser[];
    };
    meta?: {
        result_count: number;
        newest_id?: string;
        oldest_id?: string;
    };
}
```

**ã“ã‚Œã¯ä½•ã‚’ã—ã¦ã„ã‚‹ã®ã‹ï¼Ÿ**

Twitter APIã‹ã‚‰è¿”ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã®æ§‹é€ ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚

| ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ | æ„å‘³ |
|----------|------|
| `id` | ãƒ„ã‚¤ãƒ¼ãƒˆã®ID |
| `text` | ãƒ„ã‚¤ãƒ¼ãƒˆã®æœ¬æ–‡ |
| `created_at` | æŠ•ç¨¿æ—¥æ™‚ |
| `author_id` | æŠ•ç¨¿è€…ã®ID |
| `public_metrics` | ã„ã„ã­æ•°ã€ãƒªãƒ„ã‚¤ãƒ¼ãƒˆæ•°ãªã© |

**ãªãœå‹å®šç¾©ãŒå¿…è¦ï¼Ÿ**

âœ… ã‚¿ã‚¤ãƒ—ãƒŸã‚¹ã‚’é˜²ã’ã‚‹  
âœ… IDEã®è‡ªå‹•è£œå®ŒãŒåŠ¹ã  
âœ… ãƒ‡ãƒ¼ã‚¿ã®æ§‹é€ ãŒä¸€ç›®ã§ã‚ã‹ã‚‹

---

## 3. APIãƒ«ãƒ¼ãƒˆã‚’ä½œæˆã™ã‚‹

### 3-1. ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—APIã‚’ä½œã‚‹

ã¾ãšã€è‡ªåˆ†ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚’å–å¾—ã™ã‚‹APIã‚’ä½œã‚Šã¾ã™ã€‚

ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆï¼š
```bash
mkdir -p app/api/twitter/me
```

`app/api/twitter/me/route.ts`:
```typescript
import { NextRequest, NextResponse } from "next/server";
import { getServerSession } from "next-auth";
import { authOptions } from "@/lib/auth";

const TWITTER_API_BASE = "https://api.twitter.com/2";

export async function GET(request: NextRequest) {
    try {
        // ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å–å¾—
        const session = await getServerSession(authOptions);

        // ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã‚‹ã‹ç¢ºèª
        if (!session?.accessToken) {
            return NextResponse.json(
                { error: "Unauthorized" },
                { status: 401 }
            );
        }

        // Twitter APIã‚’å‘¼ã³å‡ºã™
        const url = `${TWITTER_API_BASE}/users/me`;

        const response = await fetch(url, {
            headers: {
                Authorization: `Bearer ${session.accessToken}`,
                "Content-Type": "application/json",
            },
        });

        // ã‚¨ãƒ©ãƒ¼å‡¦ç†
        if (!response.ok) {
            const error = await response.json();
            console.error("Twitter API error:", error);
            return NextResponse.json(
                { error: error.detail || "Failed to fetch user info" },
                { status: response.status }
            );
        }

        const data = await response.json();
        return NextResponse.json(data);
    } catch (error) {
        console.error("Error in /api/twitter/me:", error);
        return NextResponse.json(
            { error: "Internal server error" },
            { status: 500 }
        );
    }
}
```

**ã‚³ãƒ¼ãƒ‰ã®èª¬æ˜ï¼š**

#### ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®å–å¾—
```typescript
const session = await getServerSession(authOptions);
```

ç¬¬1éƒ¨ã§ä¿å­˜ã—ãŸã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—ã—ã¾ã™ã€‚

#### Twitter APIã‚’å‘¼ã³å‡ºã™
```typescript
const url = `${TWITTER_API_BASE}/users/me`;

const response = await fetch(url, {
    headers: {
        Authorization: `Bearer ${session.accessToken}`,
        "Content-Type": "application/json",
    },
});
```

**é‡è¦ãªãƒã‚¤ãƒ³ãƒˆï¼š**

- `Authorization`ãƒ˜ãƒƒãƒ€ãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å«ã‚ã‚‹
- `Bearer`ã¨ã„ã†å½¢å¼ã§é€ã‚‹ï¼ˆOAuth 2.0ã®æ¨™æº–ï¼‰

#### ã‚¨ãƒ©ãƒ¼å‡¦ç†
```typescript
if (!response.ok) {
    const error = await response.json();
    console.error("Twitter API error:", error);
    return NextResponse.json(
        { error: error.detail || "Failed to fetch user info" },
        { status: response.status }
    );
}
```

Twitter APIã‹ã‚‰ã‚¨ãƒ©ãƒ¼ãŒè¿”ã•ã‚ŒãŸå ´åˆã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ã—ã¾ã™ã€‚

### 3-2. ãƒ„ã‚¤ãƒ¼ãƒˆä¸€è¦§å–å¾—APIã‚’ä½œã‚‹

æ¬¡ã«ã€è‡ªåˆ†ã®ãƒ„ã‚¤ãƒ¼ãƒˆä¸€è¦§ã‚’å–å¾—ã™ã‚‹APIã‚’ä½œã‚Šã¾ã™ã€‚

ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆï¼š
```bash
mkdir -p app/api/twitter/tweets
```

`app/api/twitter/tweets/route.ts`:
```typescript
import { NextRequest, NextResponse } from "next/server";
import { getServerSession } from "next-auth";
import { authOptions } from "@/lib/auth";

const TWITTER_API_BASE = "https://api.twitter.com/2";

export async function GET(request: NextRequest) {
    try {
        const session = await getServerSession(authOptions);

        if (!session?.accessToken) {
            return NextResponse.json(
                { error: "Unauthorized" },
                { status: 401 }
            );
        }

        // ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å–å¾—
        const { searchParams } = new URL(request.url);
        const userId = searchParams.get("userId");
        const maxResults = searchParams.get("maxResults") || "5";

        if (!userId) {
            return NextResponse.json(
                { error: "userId is required" },
                { status: 400 }
            );
        }

        // Twitter APIã‚’å‘¼ã³å‡ºã™
        const url = `${TWITTER_API_BASE}/users/${userId}/tweets?max_results=${maxResults}&tweet.fields=created_at,public_metrics,author_id`;

        const response = await fetch(url, {
            headers: {
                Authorization: `Bearer ${session.accessToken}`,
                "Content-Type": "application/json",
            },
        });

        // ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã®ãƒã‚§ãƒƒã‚¯
        if (response.status === 429) {
            const rateLimitReset = response.headers.get('x-rate-limit-reset');
            const resetTime = rateLimitReset ? parseInt(rateLimitReset) : Math.floor(Date.now() / 1000) + 900;
            const waitSeconds = Math.max(0, resetTime - Math.floor(Date.now() / 1000));
            const waitMinutes = Math.ceil(waitSeconds / 60);

            return NextResponse.json(
                {
                    error: `APIåˆ¶é™ã«é”ã—ã¾ã—ãŸã€‚ç´„${waitMinutes}åˆ†å¾Œã«å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚`,
                    rateLimitExceeded: true,
                    retryAfter: waitSeconds,
                },
                { status: 429 }
            );
        }

        if (!response.ok) {
            const error = await response.json();
            return NextResponse.json(
                { error: error.detail || "Failed to fetch tweets" },
                { status: response.status }
            );
        }

        const data = await response.json();
        return NextResponse.json(data);
    } catch (error) {
        console.error("Error in /api/twitter/tweets:", error);
        return NextResponse.json(
            { error: "Internal server error" },
            { status: 500 }
        );
    }
}
```

**ã‚³ãƒ¼ãƒ‰ã®èª¬æ˜ï¼š**

#### ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å–å¾—
```typescript
const { searchParams } = new URL(request.url);
const userId = searchParams.get("userId");
const maxResults = searchParams.get("maxResults") || "5";
```

URLã‹ã‚‰`userId`ã¨`maxResults`ã‚’å–å¾—ã—ã¾ã™ã€‚

ä¾‹ï¼š`/api/twitter/tweets?userId=123&maxResults=5`

#### Twitter APIã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
```typescript
const url = `${TWITTER_API_BASE}/users/${userId}/tweets?max_results=${maxResults}&tweet.fields=created_at,public_metrics,author_id`;
```

**ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ„å‘³ï¼š**

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | æ„å‘³ |
|----------|------|
| `max_results` | å–å¾—ã™ã‚‹ãƒ„ã‚¤ãƒ¼ãƒˆæ•°ï¼ˆæœ€å¤§100ï¼‰ |
| `tweet.fields` | å–å¾—ã™ã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’æŒ‡å®š |

**ãªãœ`tweet.fields`ãŒå¿…è¦ï¼Ÿ**

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€Twitter APIã¯`id`ã¨`text`ã—ã‹è¿”ã—ã¾ã›ã‚“ã€‚æŠ•ç¨¿æ—¥æ™‚ã‚„ã„ã„ã­æ•°ã‚’å–å¾—ã™ã‚‹ã«ã¯ã€`tweet.fields`ã§æ˜ç¤ºçš„ã«æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

#### ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã¸ã®å¯¾å¿œ
```typescript
if (response.status === 429) {
    // ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã«é”ã—ãŸå ´åˆã®å‡¦ç†
}
```

Twitter API Free Tierã«ã¯åˆ¶é™ãŒã‚ã‚Šã¾ã™ï¼š

- ãƒ„ã‚¤ãƒ¼ãƒˆèª­ã¿å–ã‚Šï¼šæœˆ10,000å›

429ã‚¨ãƒ©ãƒ¼ãŒè¿”ã•ã‚ŒãŸå ´åˆã€å¾…ã¡æ™‚é–“ã‚’è¨ˆç®—ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é€šçŸ¥ã—ã¾ã™ã€‚

---

## 4. ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹

### 4-1. APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ

`lib/twitter-api.ts`:
```typescript
// Twitter APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ

import { Tweet, TwitterAPIResponse } from '@/types/tweet';

/**
 * ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—
 */
export async function getMe(): Promise<{ id: string; username: string; name: string }> {
    try {
        const response = await fetch('/api/twitter/me');

        if (!response.ok) {
            const error = await response.json();
            throw new Error(error.error || 'Failed to fetch user info');
        }

        const data = await response.json();
        return data.data;
    } catch (error) {
        console.error('Error fetching user info:', error);
        throw error;
    }
}

/**
 * ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ„ã‚¤ãƒ¼ãƒˆã‚’å–å¾—
 */
export async function getUserTweets(
    userId: string,
    maxResults: number = 5
): Promise<Tweet[]> {
    try {
        const url = `/api/twitter/tweets?userId=${userId}&maxResults=${maxResults}`;

        const response = await fetch(url);

        if (!response.ok) {
            const error = await response.json();
            throw new Error(error.error || 'Failed to fetch tweets');
        }

        const data: TwitterAPIResponse = await response.json();
        return data.data || [];
    } catch (error) {
        console.error('Error fetching tweets:', error);
        throw error;
    }
}
```

**ã“ã‚Œã¯ä½•ã‚’ã—ã¦ã„ã‚‹ã®ã‹ï¼Ÿ**

ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰è‡ªåˆ†ã®APIãƒ«ãƒ¼ãƒˆã‚’å‘¼ã³å‡ºã™é–¢æ•°ã‚’å®šç¾©ã—ã¦ã„ã¾ã™ã€‚

**ãªãœåˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã«ã™ã‚‹ã®ã‹ï¼Ÿ**

âœ… ã‚³ãƒ¼ãƒ‰ã®å†åˆ©ç”¨ãŒã§ãã‚‹  
âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã‚’ä¸€ç®‡æ‰€ã«ã¾ã¨ã‚ã‚‰ã‚Œã‚‹  
âœ… è¤‡æ•°ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰ä½¿ãˆã‚‹

---

## 5. UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹

### 5-1. ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã‚’ä½œæˆ

æ—¥ä»˜ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã™ã‚‹é–¢æ•°ã‚’ä½œã‚Šã¾ã™ã€‚

`lib/utils.ts`:
```typescript
/**
 * æ—¥ä»˜ã‚’ã€Œâ—¯åˆ†å‰ã€ã€Œâ—¯æ™‚é–“å‰ã€å½¢å¼ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
 */
export function formatDate(dateString: string): string {
    const date = new Date(dateString);
    const now = new Date();
    const diffInSeconds = Math.floor((now.getTime() - date.getTime()) / 1000);

    if (diffInSeconds < 60) {
        return `${diffInSeconds}ç§’å‰`;
    }

    const diffInMinutes = Math.floor(diffInSeconds / 60);
    if (diffInMinutes < 60) {
        return `${diffInMinutes}åˆ†å‰`;
    }

    const diffInHours = Math.floor(diffInMinutes / 60);
    if (diffInHours < 24) {
        return `${diffInHours}æ™‚é–“å‰`;
    }

    const diffInDays = Math.floor(diffInHours / 24);
    if (diffInDays < 7) {
        return `${diffInDays}æ—¥å‰`;
    }

    return date.toLocaleDateString('ja-JP', {
        year: 'numeric',
        month: 'long',
        day: 'numeric'
    });
}
```

**ã“ã‚Œã¯ä½•ã‚’ã—ã¦ã„ã‚‹ã®ã‹ï¼Ÿ**

Twitterã®ã‚ˆã†ã«ã€Œ3åˆ†å‰ã€ã€Œ2æ™‚é–“å‰ã€ã¨ã„ã†å½¢å¼ã§æ—¥ä»˜ã‚’è¡¨ç¤ºã—ã¾ã™ã€‚

### 5-2. ãƒ„ã‚¤ãƒ¼ãƒˆ1ä»¶ã‚’è¡¨ç¤ºã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

`components/`ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆï¼š
```bash
mkdir components
```

`components/TweetItem.tsx`:
```typescript
"use client";

import { Tweet } from "@/types/tweet";
import { formatDate } from "@/lib/utils";

interface TweetItemProps {
    tweet: Tweet;
    username: string;
}

export default function TweetItem({ tweet, username }: TweetItemProps) {
    return (
        <div className="border-b border-gray-200 p-4 hover:bg-gray-50 transition-colors">
            <div className="flex items-start gap-3">
                {/* ã‚¢ã‚¤ã‚³ãƒ³ */}
                <div className="w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold">
                    {username.charAt(0).toUpperCase()}
                </div>

                {/* ãƒ„ã‚¤ãƒ¼ãƒˆæœ¬æ–‡ */}
                <div className="flex-1 min-w-0">
                    {/* ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨æ—¥æ™‚ */}
                    <div className="flex items-center gap-2 mb-1">
                        <span className="font-semibold text-gray-900">
                            @{username}
                        </span>
                        <span className="text-sm text-gray-500">
                            {formatDate(tweet.created_at)}
                        </span>
                    </div>

                    {/* ãƒ„ã‚¤ãƒ¼ãƒˆæœ¬æ–‡ */}
                    <p className="text-gray-900 whitespace-pre-wrap break-words">
                        {tweet.text}
                    </p>

                    {/* ã„ã„ã­æ•°ã€ãƒªãƒ„ã‚¤ãƒ¼ãƒˆæ•° */}
                    <div className="flex items-center gap-4 mt-2 text-sm text-gray-500">
                        <span>ğŸ’¬ {tweet.public_metrics.reply_count}</span>
                        <span>ğŸ” {tweet.public_metrics.retweet_count}</span>
                        <span>â¤ï¸ {tweet.public_metrics.like_count}</span>
                    </div>
                </div>
            </div>
        </div>
    );
}
```

**ã‚³ãƒ¼ãƒ‰ã®èª¬æ˜ï¼š**

- **ã‚¢ã‚¤ã‚³ãƒ³**ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼åã®æœ€åˆã®æ–‡å­—ã‚’è¡¨ç¤ºï¼ˆãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒã®ä»£ã‚ã‚Šï¼‰
- **æ—¥æ™‚**ï¼š`formatDate`é–¢æ•°ã§ã€Œâ—¯åˆ†å‰ã€å½¢å¼ã«å¤‰æ›
- **æœ¬æ–‡**ï¼š`whitespace-pre-wrap`ã§æ”¹è¡Œã‚’ä¿æŒ
- **ãƒ¡ãƒˆãƒªã‚¯ã‚¹**ï¼šãƒªãƒ—ãƒ©ã‚¤æ•°ã€ãƒªãƒ„ã‚¤ãƒ¼ãƒˆæ•°ã€ã„ã„ã­æ•°ã‚’è¡¨ç¤º

### 5-3. ãƒ„ã‚¤ãƒ¼ãƒˆä¸€è¦§ã‚’è¡¨ç¤ºã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

`components/TweetList.tsx`:
```typescript
"use client";

import { Tweet } from "@/types/tweet";
import TweetItem from "./TweetItem";

interface TweetListProps {
    tweets: Tweet[];
    username: string;
    isLoading: boolean;
    isRefreshing: boolean;
    onRefresh: () => void;
}

export default function TweetList({
    tweets,
    username,
    isLoading,
    isRefreshing,
    onRefresh,
}: TweetListProps) {
    if (isLoading) {
        return (
            <div className="bg-white border border-gray-200 rounded-lg p-6">
                <p className="text-center text-gray-500">èª­ã¿è¾¼ã¿ä¸­...</p>
            </div>
        );
    }

    return (
        <div className="bg-white border border-gray-200 rounded-lg overflow-hidden">
            {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
            <div className="border-b border-gray-200 p-4 flex items-center justify-between">
                <h2 className="text-lg font-semibold text-gray-900">
                    æœ€è¿‘ã®æŠ•ç¨¿
                </h2>
                <button
                    onClick={onRefresh}
                    disabled={isRefreshing}
                    className="text-sm text-blue-500 hover:text-blue-600 disabled:opacity-50"
                >
                    {isRefreshing ? "æ›´æ–°ä¸­..." : "ğŸ”„ æ›´æ–°"}
                </button>
            </div>

            {/* ãƒ„ã‚¤ãƒ¼ãƒˆä¸€è¦§ */}
            {tweets.length === 0 ? (
                <div className="p-6 text-center text-gray-500">
                    ã¾ã ãƒ„ã‚¤ãƒ¼ãƒˆãŒã‚ã‚Šã¾ã›ã‚“
                </div>
            ) : (
                <div>
                    {tweets.map((tweet) => (
                        <TweetItem
                            key={tweet.id}
                            tweet={tweet}
                            username={username}
                        />
                    ))}
                </div>
            )}
        </div>
    );
}
```

**ã‚³ãƒ¼ãƒ‰ã®èª¬æ˜ï¼š**

- **ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹**ï¼š`isLoading`ãŒ`true`ã®é–“ã¯ã€Œèª­ã¿è¾¼ã¿ä¸­...ã€ã‚’è¡¨ç¤º
- **æ›´æ–°ãƒœã‚¿ãƒ³**ï¼šã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨`onRefresh`é–¢æ•°ãŒå‘¼ã°ã‚Œã‚‹
- **ç©ºã®çŠ¶æ…‹**ï¼šãƒ„ã‚¤ãƒ¼ãƒˆãŒãªã„å ´åˆã¯ã€Œã¾ã ãƒ„ã‚¤ãƒ¼ãƒˆãŒã‚ã‚Šã¾ã›ã‚“ã€ã‚’è¡¨ç¤º
- **ä¸€è¦§è¡¨ç¤º**ï¼š`map`é–¢æ•°ã§å„ãƒ„ã‚¤ãƒ¼ãƒˆã‚’`TweetItem`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§è¡¨ç¤º

### 5.4. ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã‚’æ›´æ–°

`app/page.tsx`ã‚’æ›´æ–°ã—ã¦ã€ãƒ„ã‚¤ãƒ¼ãƒˆã‚’è¡¨ç¤ºã—ã¾ã™ï¼š
```typescript
"use client";

import { useSession, signIn, signOut } from "next-auth/react";
import { useState, useEffect, useCallback } from "react";
import { Tweet } from "@/types/tweet";
import { getUserTweets, getMe } from "@/lib/twitter-api";
import TweetList from "@/components/TweetList";

export default function Home() {
    const { data: session, status } = useSession();
    const [tweets, setTweets] = useState<Tweet[]>([]);
    const [userInfo, setUserInfo] = useState<{ id: string; username: string; name: string } | null>(null);
    const [isLoading, setIsLoading] = useState(true);
    const [isRefreshing, setIsRefreshing] = useState(false);
    const [error, setError] = useState<string | null>(null);

    // ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—
    const fetchUserInfo = useCallback(async () => {
        try {
            const info = await getMe();
            setUserInfo(info);
            return info;
        } catch (err) {
            console.error("Failed to fetch user info:", err);
            setError("ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ");
            return null;
        }
    }, []);

    // ãƒ„ã‚¤ãƒ¼ãƒˆã‚’å–å¾—
    const fetchTweets = useCallback(async (userId: string) => {
        try {
            const fetchedTweets = await getUserTweets(userId, 5);
            setTweets(fetchedTweets);
            setError(null);
        } catch (err) {
            console.error("Failed to fetch tweets:", err);
            setError("æŠ•ç¨¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ");
        } finally {
            setIsLoading(false);
            setIsRefreshing(false);
        }
    }, []);

    // åˆå›ãƒ­ãƒ¼ãƒ‰
    useEffect(() => {
        if (session) {
            const loadData = async () => {
                const info = await fetchUserInfo();
                if (info) {
                    await fetchTweets(info.id);
                }
            };
            loadData();
        } else {
            setIsLoading(false);
        }
    }, [session, fetchUserInfo, fetchTweets]);

    // ãƒ„ã‚¤ãƒ¼ãƒˆã‚’æ›´æ–°
    const handleRefresh = async () => {
        if (!session || !userInfo) return;

        setIsRefreshing(true);
        await fetchTweets(userInfo.id);
    };

    if (status === "loading") {
        return (
            <div className="flex min-h-screen items-center justify-center">
                <p className="text-gray-500">èª­ã¿è¾¼ã¿ä¸­...</p>
            </div>
        );
    }

    if (!session) {
        return (
            <div className="flex min-h-screen flex-col items-center justify-center bg-gray-50">
                <div className="space-y-6 text-center">
                    <div className="space-y-2">
                        <h1 className="text-4xl font-bold text-gray-900">X My Posts</h1>
                        <p className="text-gray-600">
                            è‡ªåˆ†ã®æŠ•ç¨¿ã«é›†ä¸­ã§ãã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªXã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
                        </p>
                    </div>
                    <button
                        onClick={() => signIn("twitter")}
                        className="px-6 py-3 bg-blue-500 text-white font-medium rounded-full hover:bg-blue-600 transition-colors"
                    >
                        X (Twitter) ã§ã‚µã‚¤ãƒ³ã‚¤ãƒ³
                    </button>
                </div>
            </div>
        );
    }

    return (
        <div className="min-h-screen bg-gray-50">
            {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
            <header className="bg-white border-b border-gray-200 sticky top-0 z-10">
                <div className="max-w-2xl mx-auto px-4 py-4 flex items-center justify-between">
                    <h1 className="text-xl font-bold text-gray-900">X My Posts</h1>
                    <div className="flex items-center gap-4">
                        <span className="text-sm text-gray-600">
                            @{userInfo?.username || session.user?.name}
                        </span>
                        <button
                            onClick={() => signOut()}
                            className="text-sm text-gray-600 hover:text-gray-900"
                        >
                            ã‚µã‚¤ãƒ³ã‚¢ã‚¦ãƒˆ
                        </button>
                    </div>
                </div>
            </header>

            {/* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */}
            <main className="max-w-2xl mx-auto px-4 py-6 space-y-6">
                {/* ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */}
                {error && (
                    <div className="bg-red-50 border border-red-200 rounded-lg p-4">
                        <p className="text-red-600 text-sm">{error}</p>
                    </div>
                )}

                {/* ãƒ„ã‚¤ãƒ¼ãƒˆä¸€è¦§ */}
                <TweetList
                    tweets={tweets}
                    username={userInfo?.username || ""}
                    isLoading={isLoading}
                    isRefreshing={isRefreshing}
                    onRefresh={handleRefresh}
                />
            </main>
        </div>
    );
}
```

**ã‚³ãƒ¼ãƒ‰ã®èª¬æ˜ï¼š**

#### çŠ¶æ…‹ç®¡ç†
```typescript
const [tweets, setTweets] = useState<Tweet[]>([]);
const [userInfo, setUserInfo] = useState<...>(null);
const [isLoading, setIsLoading] = useState(true);
const [isRefreshing, setIsRefreshing] = useState(false);
const [error, setError] = useState<string | null>(null);
```

**å„çŠ¶æ…‹ã®æ„å‘³ï¼š**

| çŠ¶æ…‹ | æ„å‘³ |
|-----|------|
| `tweets` | å–å¾—ã—ãŸãƒ„ã‚¤ãƒ¼ãƒˆä¸€è¦§ |
| `userInfo` | ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ï¼ˆIDã€ãƒ¦ãƒ¼ã‚¶ãƒ¼åï¼‰ |
| `isLoading` | åˆå›ãƒ­ãƒ¼ãƒ‰ä¸­ã‹ |
| `isRefreshing` | æ›´æ–°ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸå¾Œã‹ |
| `error` | ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ |

#### ãƒ‡ãƒ¼ã‚¿å–å¾—ã®æµã‚Œ
```typescript
useEffect(() => {
    if (session) {
        const loadData = async () => {
            const info = await fetchUserInfo();  // 1. ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—
            if (info) {
                await fetchTweets(info.id);      // 2. ãƒ„ã‚¤ãƒ¼ãƒˆã‚’å–å¾—
            }
        };
        loadData();
    }
}, [session, fetchUserInfo, fetchTweets]);
```

**æµã‚Œï¼š**

1. ãƒ­ã‚°ã‚¤ãƒ³å¾Œã€`useEffect`ãŒå®Ÿè¡Œã•ã‚Œã‚‹
2. `fetchUserInfo`ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚’å–å¾—
3. ãã®IDã‚’ä½¿ã£ã¦`fetchTweets`ã§ãƒ„ã‚¤ãƒ¼ãƒˆã‚’å–å¾—

---

## 6. å‹•ä½œç¢ºèª

### 6-1. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™ï¼š
```bash
npm run dev
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§`http://localhost:3000`ã‚’é–‹ãã¾ã™ã€‚

### 6-2. ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãƒ„ã‚¤ãƒ¼ãƒˆã‚’ç¢ºèª

**æ‰‹é †ï¼š**

1. ã€ŒX (Twitter) ã§ã‚µã‚¤ãƒ³ã‚¤ãƒ³ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. Twitterèªè¨¼ã‚’å®Œäº†
3. **è‡ªåˆ†ã®æœ€æ–°ãƒ„ã‚¤ãƒ¼ãƒˆ5ä»¶ãŒè¡¨ç¤ºã•ã‚Œã‚‹ï¼**

**æˆåŠŸã§ã™ï¼**

### 6-3. æ›´æ–°ãƒœã‚¿ãƒ³ã‚’è©¦ã™

ã€ŒğŸ”„ æ›´æ–°ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€æœ€æ–°ã®ãƒ„ã‚¤ãƒ¼ãƒˆãŒå†å–å¾—ã•ã‚Œã¾ã™ã€‚

---

## 7. ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¨è§£æ±ºæ–¹æ³•

### ã‚¨ãƒ©ãƒ¼1: ã€ŒFailed to fetch user infoã€

**ç—‡çŠ¶ï¼š**

ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãŒå–å¾—ã§ããšã€ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚

**åŸå› ï¼š**

1. ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ãŒæœŸé™åˆ‡ã‚Œ
2. Twitter APIã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã«é”ã—ãŸ
3. ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼

**è§£æ±ºæ–¹æ³•ï¼š**

1. ã‚µã‚¤ãƒ³ã‚¢ã‚¦ãƒˆã—ã¦å†ã‚µã‚¤ãƒ³ã‚¤ãƒ³
2. å°‘ã—å¾…ã£ã¦ã‹ã‚‰å†åº¦è©¦ã™
3. ãƒ–ãƒ©ã‚¦ã‚¶ã®é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã‚’ç¢ºèª

### ã‚¨ãƒ©ãƒ¼2: ã€ŒFailed to fetch tweetsã€

**ç—‡çŠ¶ï¼š**

ãƒ„ã‚¤ãƒ¼ãƒˆä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œãšã€ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚

**åŸå› ï¼š**

1. userIdãŒæ­£ã—ãæ¸¡ã•ã‚Œã¦ã„ãªã„
2. Twitter APIã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™
3. ãƒ„ã‚¤ãƒ¼ãƒˆãŒ0ä»¶

**è§£æ±ºæ–¹æ³•ï¼š**

**é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã§ãƒ‡ãƒãƒƒã‚°ï¼š**

1. F12ã‚­ãƒ¼ã‚’æŠ¼ã—ã¦é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã‚’é–‹ã
2. Consoleã‚¿ãƒ–ã§ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’ç¢ºèª
3. Networkã‚¿ãƒ–ã§APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç¢ºèª

**ã‚ˆãã‚ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼š**
```
Failed to fetch tweets: userId is required
```

â†’ ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®å–å¾—ã«å¤±æ•—ã—ã¦ã„ã‚‹å¯èƒ½æ€§

### ã‚¨ãƒ©ãƒ¼3: ã€ŒAPIåˆ¶é™ã«é”ã—ã¾ã—ãŸã€

**ç—‡çŠ¶ï¼š**

ã€Œç´„15åˆ†å¾Œã«å†åº¦ãŠè©¦ã—ãã ã•ã„ã€ã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚

**åŸå› ï¼š**

Twitter API Free Tierã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã«é”ã—ãŸã€‚

**è§£æ±ºæ–¹æ³•ï¼š**

âœ… 15åˆ†å¾…ã¤  
âœ… ãƒªãƒ­ãƒ¼ãƒ‰ã‚’ç¹°ã‚Šè¿”ã•ãªã„  
âœ… ä¸è¦ãªAPIå‘¼ã³å‡ºã—ã‚’æ¸›ã‚‰ã™

**ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã®è©³ç´°ï¼š**

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | åˆ¶é™ |
|-------------|------|
| ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾— | 15åˆ†ã‚ãŸã‚Š900å› |
| ãƒ„ã‚¤ãƒ¼ãƒˆå–å¾— | 15åˆ†ã‚ãŸã‚Š900å› |

é–‹ç™ºä¸­ã¯å•é¡Œã«ãªã‚Šã¾ã›ã‚“ãŒã€æœ¬ç•ªç’°å¢ƒã§ã¯æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚

### ã‚¨ãƒ©ãƒ¼4: ãƒ„ã‚¤ãƒ¼ãƒˆãŒè¡¨ç¤ºã•ã‚Œãªã„

**ç—‡çŠ¶ï¼š**

ã‚¨ãƒ©ãƒ¼ã¯ãªã„ãŒã€ãƒ„ã‚¤ãƒ¼ãƒˆãŒ0ä»¶ã¨è¡¨ç¤ºã•ã‚Œã‚‹ã€‚

**åŸå› ï¼š**

1. ã¾ã ãƒ„ã‚¤ãƒ¼ãƒˆã‚’æŠ•ç¨¿ã—ã¦ã„ãªã„
2. APIãŒå¤ã„ãƒ„ã‚¤ãƒ¼ãƒˆã—ã‹å–å¾—ã§ãã¦ã„ãªã„

**è§£æ±ºæ–¹æ³•ï¼š**

1. Twitterã‚¢ãƒ—ãƒªã§æ–°ã—ã„ãƒ„ã‚¤ãƒ¼ãƒˆã‚’æŠ•ç¨¿
2. ã€ŒğŸ”„ æ›´æ–°ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ãã‚Œã§ã‚‚è¡¨ç¤ºã•ã‚Œãªã„å ´åˆã€é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã§ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ç¢ºèª

---

## ã¾ã¨ã‚

### ã“ã®è¨˜äº‹ã§ã§ããŸã“ã¨

âœ… Twitter APIã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ä»•çµ„ã¿ã‚’ç†è§£ã—ãŸ  
âœ… APIãƒ«ãƒ¼ãƒˆã‚’ä½œæˆã—ãŸï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã€ãƒ„ã‚¤ãƒ¼ãƒˆä¸€è¦§ï¼‰  
âœ… ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½œæˆã—ãŸ  
âœ… UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã—ãŸï¼ˆãƒ„ã‚¤ãƒ¼ãƒˆè¡¨ç¤ºï¼‰  
âœ… **è‡ªåˆ†ã®æœ€æ–°ãƒ„ã‚¤ãƒ¼ãƒˆ5ä»¶ãŒç”»é¢ã«è¡¨ç¤ºã•ã‚ŒãŸï¼**

### æ¬¡ã®ç¬¬3éƒ¨ã§ã¯

ç¬¬3éƒ¨ã§ã¯ã€**ãƒ„ã‚¤ãƒ¼ãƒˆæŠ•ç¨¿ãƒ»å‰Šé™¤æ©Ÿèƒ½**ã‚’å®Ÿè£…ã—ã¾ã™ã€‚

å†…å®¹ï¼š
- ãƒ„ã‚¤ãƒ¼ãƒˆæŠ•ç¨¿APIã®å®Ÿè£…
- ãƒ„ã‚¤ãƒ¼ãƒˆå‰Šé™¤APIã®å®Ÿè£…
- ãƒ„ã‚¤ãƒ¼ãƒˆä½œæˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½
- ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ï¼ˆ403 Forbiddenï¼‰ã¨è§£æ±ºæ–¹æ³•

ç¬¬2éƒ¨ã§ãƒ„ã‚¤ãƒ¼ãƒˆè¡¨ç¤ºãŒã§ãã¦ã„ã‚‹ã®ã§ã€ç¬¬3éƒ¨ã¯ã‚‚ã£ã¨æ¥½ã—ã„ã§ã™ï¼

---

## å‚è€ƒè³‡æ–™

### å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [Twitter API v2 - User Lookup](https://developer.twitter.com/en/docs/twitter-api/users/lookup/introduction) - ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—
- [Twitter API v2 - Tweets Lookup](https://developer.twitter.com/en/docs/twitter-api/tweets/lookup/introduction) - ãƒ„ã‚¤ãƒ¼ãƒˆå–å¾—
- [Next.js API Routes](https://nextjs.org/docs/app/building-your-application/routing/route-handlers) - APIãƒ«ãƒ¼ãƒˆã®ä½œã‚Šæ–¹

### Twitter APIé–¢é€£

- [Twitter APIã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã«ã¤ã„ã¦](https://developer.twitter.com/en/docs/twitter-api/rate-limits) - ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã®è©³ç´°
- [Twitter API v2ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æŒ‡å®š](https://developer.twitter.com/en/docs/twitter-api/fields) - tweet.fieldsã®ä½¿ã„æ–¹

### React Hooksé–¢é€£

- [useEffectå®Œå…¨ã‚¬ã‚¤ãƒ‰](https://overreacted.io/ja/a-complete-guide-to-useeffect/) - useEffectã®ä½¿ã„æ–¹
- [useCallbackã®ä½¿ã„æ–¹](https://react.dev/reference/react/useCallback) - useCallbackã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

- [Next.jsã§ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°](https://nextjs.org/docs/app/building-your-application/routing/error-handling) - ã‚¨ãƒ©ãƒ¼å‡¦ç†ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
- [fetch APIã®ä½¿ã„æ–¹](https://developer.mozilla.org/ja/docs/Web/API/Fetch_API/Using_Fetch) - fetchã®åŸºç¤

ãŠç–²ã‚Œã•ã¾ã§ã—ãŸï¼ğŸ‰

æ¬¡ã®ç¬¬3éƒ¨ã§ã€ã¤ã„ã«å®Œæˆã—ã¾ã™ï¼